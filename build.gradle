plugins {
  id "com.palantir.docker" version "0.21.0"
  id 'org.springframework.boot' version '2.1.3.RELEASE'
}

group 'com.kieranjohnmoore'
version '0.1-SNAPSHOT'

apply plugin: 'java'
apply plugin: 'org.springframework.boot'
apply plugin: 'io.spring.dependency-management'
apply plugin: 'com.palantir.docker'

repositories {
  mavenCentral()
}

sourceCompatibility = JavaVersion.VERSION_11
targetCompatibility = JavaVersion.VERSION_11

dependencies {
  compile("org.springframework.boot:spring-boot-starter-web")
  compile("com.google.code.gson:gson:2.8.1")

  testCompile('org.springframework.boot:spring-boot-starter-test')
}

docker {
  dependsOn build
  name "kieranjohnmoore/$rootProject.name"
  files jar.archivePath
  buildArgs(['JAR_FILE': "${jar.archiveName}"])
  dockerfile project.file('docker/Dockerfile')
}
